---
import BaseLayout from "../layouts/BaseLayout.astro";

const toEmail = "rhisolutions316@gmail.com";

const service = Astro.url.searchParams.get("service") ?? "";
const location = Astro.url.searchParams.get("location") ?? "";
---

<BaseLayout
  title="Request a Quote | Revision Home Improvements (Lehigh Valley, PA)"
  description="Request a quote for remodeling, repairs, or flooring in the Lehigh Valley, PA. Share a few details and we’ll reply within 24–48 hours."
>
  <section class="wrap section" style="padding-top: 0;">
    <div class="card">
      <h1>Request a Quote</h1>
      <p class="muted" style="margin-top:0;">
        We aim to reply within <strong>24–48 hours</strong>. Your request will be sent to <strong>{toEmail}</strong>.
        <br />
        <span class="muted">No spam—just a fast follow-up about your project.</span>
      </p>

      <!--
        NOTE: This form posts to /api/quote (Netlify/Vercel/etc).
        We'll wire it up once hosting is chosen.
      -->
      <form method="post" action="/api/quote">
        <input type="hidden" name="lead_source" value="website" />

        <div class="grid">
          <label>
            Full name
            <input name="name" autocomplete="name" required />
          </label>
          <label>
            Phone
            <input name="phone" type="tel" inputmode="tel" autocomplete="tel" required placeholder="(484) 555-1234" />
          </label>
          <label>
            Email
            <input name="email" type="email" autocomplete="email" required placeholder="you@example.com" />
          </label>
          <label>
            City / Zip
            <input name="location" autocomplete="postal-code" value={location} placeholder="e.g., Bethlehem 18015" />
          </label>
          <label>
            Project type
            <select name="service" value={service}>
              <option value="">Select…</option>
              <option value="Remodeling" selected={service === "Remodeling"}>Remodeling</option>
              <option value="Repairs" selected={service === "Repairs"}>Repairs & Punch Lists</option>
              <option value="Flooring" selected={service === "Flooring"}>Flooring & Finishes</option>
            </select>
          </label>
          <label>
            Preferred contact
            <select name="preferred_contact">
              <option value="">No preference</option>
              <option value="Call">Call</option>
              <option value="Text">Text</option>
              <option value="Email">Email</option>
            </select>
          </label>
        </div>

        <label>
          Tell us about your project
          <textarea
            name="message"
            rows="6"
            required
            placeholder="What do you want done? Any measurements/photos/links? Desired timeline?"
          ></textarea>
        </label>

        <div class="row">
          <button class="btn" type="submit">Send Request</button>
          <a class="btn btn-outline" href="/">Back to Home</a>
        </div>

        <div class="fineprint muted">
          Prefer to talk it through? Call us and we’ll get you on the schedule.
        </div>
      </form>
    </div>
  </section>
</BaseLayout>

<style>
  h1 { margin: 0 0 10px; }

  label { display: grid; gap: 6px; margin: 12px 0; font-weight: 700; }
  input, textarea, select {
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 12px;
    color: var(--text);
    font: inherit;
  }

  .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .row { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 12px; }

  .fineprint { margin-top: 14px; }

  @media (max-width: 720px) {
    .grid { grid-template-columns: 1fr; }
  }
</style>
